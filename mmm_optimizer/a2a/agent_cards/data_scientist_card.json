{
  "agent_id": "mmm_data_scientist_v1.0",
  "name": "MMM Data Scientist Agent",
  "version": "1.0.0",
  "protocol_version": "a2a/1.0",
  "created_at": "2025-12-01T00:00:00Z",
  "updated_at": "2025-12-08T00:00:00Z",
  
  "description": "Expert in Marketing Mix Modeling hyperparameter optimization. Deep knowledge of MMM methodology including adstock theory (beta-gamma decay), saturation curves (Hill function), and hierarchical modeling. Tunes 12 hyperparameters within scientifically validated ranges while protecting core methodology.",
  
  "role": "technical_optimizer",
  "domain": "marketing_mix_modeling",
  "expertise": [
    "hyperparameter_optimization",
    "adstock_modeling",
    "saturation_curves",
    "hierarchical_bayesian_modeling",
    "marketing_science"
  ],
  
  "capabilities": [
    {
      "name": "optimize_hyperparameters",
      "description": "Analyze model performance (MAPE, R², MAE) and propose scientifically-grounded hyperparameter adjustments to improve predictive accuracy",
      "method": "POST",
      "endpoint": "/execute",
      "timeout_seconds": 30,
      "input_schema": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "properties": {
          "state": {
            "type": "object",
            "description": "Current MMM state with performance metrics and configuration",
            "properties": {
              "iteration": {"type": "integer"},
              "performance": {
                "type": "object",
                "properties": {
                  "mape": {"type": "number", "description": "Mean Absolute Percentage Error"},
                  "r2": {"type": "number", "description": "R-squared coefficient"},
                  "mae": {"type": "number", "description": "Mean Absolute Error"}
                },
                "required": ["mape", "r2", "mae"]
              },
              "model_config": {
                "type": "object",
                "properties": {
                  "methodology": {"type": "object", "description": "Protected fields"},
                  "hyperparameters": {"type": "object", "description": "Tunable parameters"}
                }
              },
              "business_context": {"type": "object"}
            },
            "required": ["iteration", "performance", "model_config"]
          },
          "history": {
            "type": "object",
            "description": "Complete optimization history with all previous iterations",
            "properties": {
              "session_id": {"type": "string"},
              "iterations": {
                "type": "array",
                "items": {"type": "object"}
              }
            }
          },
          "extra_context": {
            "type": "object",
            "description": "Additional context like rejection feedback or constraints"
          }
        },
        "required": ["state", "history"]
      },
      "output_schema": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "properties": {
          "agent_name": {
            "type": "string",
            "const": "data_scientist"
          },
          "action": {
            "type": "string",
            "enum": ["hyperparameter_update", "no_change", "convergence_reached"]
          },
          "proposed_changes": {
            "type": "object",
            "properties": {
              "hyperparameters": {
                "type": "object",
                "description": "Map of parameter names to new values"
              }
            }
          },
          "reasoning": {
            "type": "string",
            "description": "Detailed explanation of proposed changes"
          },
          "confidence": {
            "type": "number",
            "minimum": 0,
            "maximum": 1,
            "description": "Agent's confidence in recommendation"
          },
          "next_agent_suggestion": {
            "type": "string",
            "enum": ["business_analyst", "stakeholder", null]
          },
          "flags": {
            "type": "object",
            "description": "Warnings or recommendations"
          }
        },
        "required": ["agent_name", "action", "reasoning", "confidence"]
      },
      "examples": [
        {
          "input": {
            "state": {
              "iteration": 5,
              "performance": {"mape": 12.3, "r2": 0.85, "mae": 1200},
              "model_config": {
                "hyperparameters": {
                  "tv_adstock_decay": 0.6,
                  "tv_saturation_alpha": 2.0
                }
              }
            }
          },
          "output": {
            "agent_name": "data_scientist",
            "action": "hyperparameter_update",
            "proposed_changes": {
              "hyperparameters": {
                "tv_adstock_decay": 0.75,
                "tv_saturation_alpha": 2.5
              }
            },
            "reasoning": "Extended TV carryover to ~10 weeks (CPG standard). Sharpened saturation curve.",
            "confidence": 0.85,
            "next_agent_suggestion": "business_analyst"
          }
        }
      ]
    }
  ],
  
  "constraints": {
    "protected_methodology": {
      "description": "Fields that MUST NOT be changed (enforced via LLM system prompt)",
      "fields": {
        "adstock_type": {
          "value": "beta_gamma",
          "rationale": "Beta-Gamma decay validated by Montgomery et al. (1989), Broadbent (1997)"
        },
        "saturation_type": {
          "value": "hill",
          "rationale": "Hill function is industry standard for bounded, realistic response"
        },
        "hierarchy_levels": {
          "value": ["brand", "region", "channel"],
          "rationale": "Mirrors organizational structure, enables granular insights"
        },
        "architecture_type": {
          "value": "hierarchical_neural_additive",
          "rationale": "Supports hierarchical modeling with interpretability"
        },
        "loss_type": {
          "value": "mse",
          "rationale": "Mean squared error for regression problems"
        }
      }
    },
    "tunable_parameters": {
      "tv_adstock_decay": {
        "min": 0.2,
        "max": 0.9,
        "default": 0.5,
        "description": "TV carryover effect (0.2=6 weeks, 0.9=12 weeks typical)"
      },
      "digital_adstock_decay": {
        "min": 0.2,
        "max": 0.7,
        "default": 0.4,
        "description": "Digital carryover effect (shorter than TV)"
      },
      "print_adstock_decay": {
        "min": 0.1,
        "max": 0.6,
        "default": 0.3,
        "description": "Print carryover effect"
      },
      "ooh_adstock_decay": {
        "min": 0.2,
        "max": 0.8,
        "default": 0.45,
        "description": "Out-of-home carryover effect"
      },
      "tv_saturation_alpha": {
        "min": 1.5,
        "max": 3.5,
        "default": 2.0,
        "description": "TV saturation curve steepness"
      },
      "digital_saturation_alpha": {
        "min": 1.5,
        "max": 3.5,
        "default": 2.2,
        "description": "Digital saturation curve steepness"
      },
      "print_saturation_alpha": {
        "min": 1.5,
        "max": 3.5,
        "default": 1.8,
        "description": "Print saturation curve steepness"
      },
      "ooh_saturation_alpha": {
        "min": 1.5,
        "max": 3.5,
        "default": 2.1,
        "description": "OOH saturation curve steepness"
      },
      "learning_rate": {
        "min": 0.0001,
        "max": 0.01,
        "default": 0.001,
        "description": "Neural network learning rate"
      },
      "regularization": {
        "min": 0.001,
        "max": 0.1,
        "default": 0.01,
        "description": "L2 regularization to prevent overfitting"
      },
      "batch_size": {
        "min": 16,
        "max": 128,
        "default": 32,
        "description": "Training batch size"
      },
      "epochs": {
        "min": 50,
        "max": 1000,
        "default": 200,
        "description": "Training epochs"
      }
    },
    "optimization_strategy": {
      "high_mape": {
        "threshold": "> 12%",
        "action": "Aggressive adstock/saturation adjustments (±20%)"
      },
      "medium_mape": {
        "threshold": "8-12%",
        "action": "Moderate fine-tuning of alpha parameters (±10%)"
      },
      "low_mape": {
        "threshold": "< 8%",
        "action": "Conservative learning rate/regularization optimization"
      }
    },
    "max_consecutive_rejections": 3,
    "loop_detection_threshold": 3
  },
  
  "performance_metrics": {
    "avg_response_time_ms": 5000,
    "p50_response_time_ms": 4200,
    "p95_response_time_ms": 8000,
    "p99_response_time_ms": 12000,
    "success_rate": 0.95,
    "total_invocations": 1250,
    "avg_mape_improvement_per_call": 1.2,
    "methodology_violation_rate": 0.0
  },
  
  "dependencies": {
    "runtime": {
      "language": "python",
      "version": ">=3.9"
    },
    "libraries": [
      {"name": "anthropic", "version": ">=0.18.0", "purpose": "Claude API client"},
      {"name": "pyyaml", "version": ">=6.0", "purpose": "Configuration loading"}
    ],
    "llm": {
      "provider": "anthropic",
      "model": "claude-sonnet-4-20250514",
      "context_window": 200000,
      "estimated_tokens_per_call": 3000,
      "estimated_cost_per_call_usd": 0.045
    },
    "external_services": [
      {
        "name": "Anthropic API",
        "required": true,
        "fallback": null
      }
    ]
  },
  
  "auth": {
    "type": "bearer",
    "token_env_var": "ANTHROPIC_API_KEY",
    "required_scopes": ["api:read", "api:write"]
  },
  
  "sla": {
    "availability": 0.99,
    "max_response_time_ms": 15000,
    "rate_limit": {
      "requests_per_minute": 60,
      "requests_per_hour": 3000
    }
  },
  
  "monitoring": {
    "health_check_endpoint": "/health",
    "metrics_endpoint": "/metrics",
    "log_level": "INFO",
    "log_file": "logs/data_scientist_agent_{date}.log"
  },
  
  "versioning": {
    "semantic_version": "1.0.0",
    "api_version": "v1",
    "backwards_compatible_with": ["0.9.x"],
    "deprecation_policy": "6 months notice for breaking changes"
  },
  
  "metadata": {
    "tags": ["mmm", "optimization", "marketing", "hyperparameter-tuning"],
    "category": "technical_optimizer",
    "maturity": "production",
    "license": "proprietary"
  },
  
  "contact": {
    "maintainer": "MMM Development Team",
    "email": "mmm-dev@company.com",
    "repository": "https://github.com/Kumarjit-Pathak/Agentic-MMM-development",
    "documentation": "https://docs.company.com/mmm/data-scientist-agent",
    "support": "https://support.company.com/mmm"
  }
}
